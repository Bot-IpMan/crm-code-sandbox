# Технічна архітектура конкурентної платформи

## Дизайн бази даних
- **companies** `(id, name, status, settings)` — довідник компаній з їхнім поточним станом та індивідуальними налаштуваннями.
- **competitors** `(id, company_id, name, priority, tags)` — конкуренти, пов'язані з компаніями через `company_id`, із пріоритетами та тегами для сегментації.
- **modules** `(id, competitor_id, type, config, data, position)` — модулі, закріплені за конкурентами; зберігають тип, конфігурацію, дані та позицію в макеті.
- **permissions** `(user_id, resource_type, resource_id, actions)` — матриця доступів для конкретних ресурсів (компаній, конкурентів, модулів) з підтримкою CRUD-дозволів.

## API-стратегія
- **REST**: `/api/companies/:id/competitors/:id/modules` — класичні CRUD-операції над модулями в контексті компанії та конкурента.
- **Bulk API**: `/api/bulk/modules` — масове створення, оновлення та видалення модулів із підтримкою транзакційних пакетів.
- **GraphQL**: побудова гнучких запитів для складних агрегацій, пов'язаних об'єктів і умовного завантаження.
- **WebSocket**: двосторонні канали для push-оновлень модулів та сигналів колаборації в реальному часі.

## Продуктивність та масштабованість
- **База даних**: індексування критичних полів (особливо `company_id`) і партиціонування таблиць за компаніями для зниження латентності.
- **Кешування**: Redis для швидкого доступу до часто використовуваних даних модулів і налаштувань конкурентів.
- **CDN**: розповсюдження статичних ресурсів, зображень та heavy media з мінімальною затримкою.
- **Пагінація**: курсорна пагінація для обробки великих списків конкурентів і модулів без пікових навантажень на базу.

## Реалтайм та надійність
- **Події**: WebSocket/SignalR-канали для синхронізації змін між клієнтами, push-сповіщення про оновлення модулів.
- **Моніторинг**: телеметрія запитів, latency-tracing та алерти на SLA (CRUD < 100 мс, bulk-операції < 10 с).
- **Recovery**: стратегії бекапів для критичних таблиць і механізми відновлення після збоїв кеша або WebSocket-хабів.
